<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>博物馆生存指南 V11.0 </title>
        <link rel="stylesheet" href="styles.css">
</head>
<body>

<div id="start-screen">
    <div class="pixel-museum">🏛️</div>
    <div class="game-title">博物馆生存指南</div>
    <button class="btn-start" onclick="startGame()">开始游戏</button>
</div>

<div id="app" class="game-container">
    <div class="panel col-left" id="col-left">
        <div class="settings-wrap" id="settings-wrap">
            <button class="settings-btn" id="settings-btn" aria-haspopup="true" aria-expanded="false">⚙️</button>
            <div class="settings-menu" id="settings-menu" role="menu">
            <div class="menu-item" onclick="game.undoQuarter()">↺ 返回上一季度</div>
            <div class="menu-item" onclick="location.reload()">☠ 重置所有数据</div>
            </div>
        </div>

        <div class="profile-card">
            <div class="avatar">🏛️</div>
            <div class="tooltip" id="user-intro">
                【个人档案】<br>
                一名怀揣梦想进入博物馆行业的年轻人。<br>
                性格：随机生成<br>
                特长：头发浓密（暂时）<br>
                座右铭：为了文物，为了经费！
            </div>
            <div class="user-name" id="ui-name">NoName</div>
            <div class="user-title" id="ui-title">助理馆员</div>
            <div style="font-size:0.8rem; margin-top:5px; color:#90a4ae;" id="ui-edu">PHD</div>
            <div style="font-size:0.8rem; margin-top:2px; color:#90a4ae;">年龄：<span id="ui-age">0</span>岁</div>
            <button id="btn-promote" class="primary" style="width:100%; margin-top:15px; font-size:0.85rem;" onclick="game.actionPromote()" disabled>申请职称评定</button>
        </div>

        <div id="status-panel">
            <div class="stats-grid">
                <div class="stat-item"><span class="stat-label">智商</span><span class="stat-num" id="ui-iq">0</span></div>
                <div class="stat-item"><span class="stat-label">情商</span><span class="stat-num" id="ui-eq">0</span></div>
                <div class="stat-item"><span class="stat-label">声望</span><span class="stat-num" id="ui-rep">0</span></div>
                <div class="stat-item"><span class="stat-label">公款</span><span class="stat-num" id="ui-money" style="font-size:0.9rem">0</span></div>
                <div class="stat-item"><span class="stat-label">存款</span><span class="stat-num" id="ui-savings" style="font-size:0.9rem">0</span></div>
            </div>

            <div class="bars-area">
                <div class="bar-row">
                    <div class="bar-label"><span>精力</span><span id="txt-health">100</span></div>
                    <div class="bar-track"><div class="bar-fill" id="bar-health" style="background:var(--danger)"></div></div>
                </div>
                <div class="bar-row">
                    <div class="bar-label"><span>愉悦</span><span id="txt-mood">100</span></div>
                    <div class="bar-track"><div class="bar-fill" id="bar-mood" style="background:var(--warning)"></div></div>
                </div>
            </div>
        </div>

        <div class="leisure-section">
            <div class="leisure-header">
                <span>☕ 摸鱼休息</span> <span id="limit-leisure" style="color:var(--primary)">2/2</span>
            </div>
            <div class="leisure-grid" style="display:grid; gap:8px;">
                <button class="btn-leisure" style="display:flex; justify-content:space-between;" onclick="game.actionLeisure('slack')"><span>闭目养神</span><span>💤</span></button>
                <button class="btn-leisure" style="display:flex; justify-content:space-between;" onclick="game.actionLeisure('read')"><span>阅读书籍</span><span>📚</span></button>
                <button class="btn-leisure" style="display:flex; justify-content:space-between;" onclick="game.actionLeisure('gossip')"><span>聊聊八卦</span><span>💬</span></button>
            </div>
        </div>

        <div class="shop-section">
            <div class="shop-header">🛒 文创商店</div>
            <div class="shop-grid">
                <button class="btn-shop" onclick="game.actionShop('coffee')">
                    <span>☕ 咖啡</span><span style="font-size:0.75em; color:#999">50元</span>
                </button>
                <button class="btn-shop" onclick="game.actionShop('meal')">
                    <span>🍱 小食套餐</span><span style="font-size:0.75em; color:#999">100元</span>
                </button>
            </div>
        </div>
    </div>

    <div class="panel col-center" id="col-middle" style="background:#f8faff; border:none; padding:0; box-shadow:none;">
    
    <div class="middle-nav">
        <div class="nav-tab active" onclick="game.switchScene('office')" id="tab-office">🏢 办公室</div>
        <div class="nav-tab" onclick="game.switchScene('university')" id="tab-university">🎓 大学</div>
        <div class="nav-tab locked" onclick="game.switchScene('home')" id="tab-home">🏠 家庭</div>
    </div>

    <div id="view-office" class="view-container active">
        <div class="nav-block" id="research-block">
            <div class="nav-title">
                <span>🔬 科研项目</span>
                <span style="font-size:0.9rem; color:var(--text-sub)" id="research-count">0/5</span>
            </div>
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <span id="research-msg" style="font-size:0.85rem; color:var(--text-sub);">窗口期关闭</span>
                <button id="btn-research" class="primary" onclick="game.actionResearch()" disabled>申报</button>
            </div>
        </div>

        <div class="nav-block" id="exhibit-block" style="flex:1; display:flex; flex-direction:column; overflow:hidden;">
            <div class="nav-title">
                <span>🏛️ 展览策划</span>
                <div style="font-size:0.8rem; color:#e57373;">每次操作消耗少量精力</div>
            </div>
            
            <button id="btn-new-exhibit" class="primary" style="margin-bottom:15px; width:100%; padding:12px;" onclick="game.actionApplyExhibit()">+ 申请新展览</button>
            
            <div id="exhibits-container" style="flex:1; overflow-y:auto; padding-right:5px;"></div>
        </div>
    </div>

    <div id="view-university" class="view-container">
        <div class="university-panel">
            <div class="university-header">大学进修</div>
            <div id="university-status" class="university-status"></div>
            <div id="university-actions" class="university-actions"></div>
            <div class="university-section">
                <div class="university-section-title">本季度课程</div>
                <div id="university-courses" class="university-courses"></div>
            </div>
            <div class="university-section">
                <div class="university-section-title">论文进度</div>
                <div id="university-thesis" class="university-thesis"></div>
            </div>
        </div>
    </div>

    <div id="view-home" class="view-container">
        <div class="scene-placeholder">
            <div class="scene-icon">🔒</div>
            <h3>温馨小窝</h3>
            <p>这里是你心灵的港湾。</p>
            <p style="color:var(--danger); margin-top:10px">解锁条件：个人存款达到 100,000 元</p>
        </div>
        <div id="home-content" class="hidden" style="width:100%">
            <p>欢迎回家！这里可以恢复大量心情。</p>
        </div>
    </div>

</div>

    <div class="panel col-right" id="col-right">
        <div class="right-tabs">
            <button class="right-tab-btn active" onclick="game.switchRightTab('admin')">行政任务</button>
            <button class="right-tab-btn" onclick="game.switchRightTab('log')">工作日志</button>
        </div>
        <div id="panel-admin" class="right-panel active">
            <div class="chat-container" id="admin-chat-box">
                <div class="chat-msg leader">
                    <div class="avatar">?</div>
                    <div class="bubble">小王啊，这有个紧急材料要写一下。</div>
                </div>
            </div>
            <div class="admin-actions" id="admin-actions">
                <button class="dice-btn" onclick="game.actionRollDice()">🎲 尝试甩锅 (Roll)</button>
            </div>
        </div>
        <div id="panel-log" class="right-panel">
            <div class="log-header">
                <span>工作周报</span><span class="log-tag">Y<span id="ui-year">1</span> - Q<span id="ui-quarter">1</span></span>
            </div>
            <div id="log-container"></div>
        </div>
        <button class="primary" id="btn-end-quarter" onclick="game.nextQuarter()" style="margin-top:15px; height:55px; font-size:1.1rem; border-radius:16px;">结束本季度🌙</button>
    </div>
</div>

<div id="modal-overlay" class="modal-overlay hidden" onclick="game.tryCloseModal(event)">
    <div class="modal-box" onclick="event.stopPropagation()">
        <div class="modal-title" id="modal-title">TITLE</div>
        <div class="modal-text" id="modal-text">Content...</div>
        <div class="choice-list" id="modal-choices"></div>
    </div>
</div>

<div id="guide-overlay" class="guide-overlay hidden" onclick="game.nextGuideStep(event)">
    <div class="guide-highlight" id="guide-highlight"></div>
    <div class="guide-bubble" id="guide-bubble" onclick="event.stopPropagation()">
        <button class="guide-skip" id="guide-skip" onclick="game.skipGuide(event)">跳过</button>
        <div class="guide-step" id="guide-step">步骤 1/10</div>
        <div class="guide-text" id="guide-text"></div>
        <button class="guide-next" id="guide-next" onclick="game.nextGuideStep(event)">下一步</button>
    </div>
</div>

<script src="data.js"></script>
<script src="game.js"></script>
<script src="main.js"></script>
